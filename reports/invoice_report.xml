<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_invoice_ncf" inherit_id="account.report_invoice_document">

        <!-- NCF destacado arriba del todo -->
        <xpath expr="//h2" position="before">
            <t t-if="o.l10n_do_ncf_number">
                <div style="background: linear-gradient(135deg, #28a745 0%, #218838 100%);
                            color: white;
                            padding: 15px 20px;
                            border-radius: 8px;
                            margin-bottom: 15px;
                            text-align: center;">
                    <div style="font-size: 14px; margin-bottom: 5px;">COMPROBANTE FISCAL</div>
                    <div style="font-size: 28px; font-weight: bold; letter-spacing: 2px;">
                        <t t-esc="o.l10n_do_ncf_number"/>
                    </div>
                    <div style="font-size: 12px; margin-top: 5px;">
                        <t t-esc="o.l10n_do_ncf_type_id.name"/>
                    </div>
                </div>
            </t>
        </xpath>

        <!-- Informacion fiscal del cliente -->
        <xpath expr="//address[@t-field='o.partner_id']" position="after">
            <t t-if="o.partner_id.vat">
                <div style="margin-top: 5px; padding: 8px 12px; background-color: #f8f9fa; border-radius: 5px; border-left: 4px solid #007bff;">
                    <strong style="color: #495057;">RNC/Cedula: </strong>
                    <span style="font-weight: bold; font-size: 14px; letter-spacing: 1px;"><t t-esc="o.partner_id.vat"/></span>
                </div>
            </t>
        </xpath>

        <!-- Informacion fiscal en seccion de datos -->
        <xpath expr="//div[@id='informations']" position="inside">
            <t t-if="o.l10n_do_ncf_number">
                <div class="col-auto col-3 mw-100 mb-2"
                     style="background-color: #e8f5e9; padding: 10px; border-radius: 5px; border: 1px solid #28a745;">
                    <strong style="color: #28a745;">NCF:</strong>
                    <p class="m-0" style="font-size: 16px; font-weight: bold; color: #28a745;"><t t-esc="o.l10n_do_ncf_number"/></p>
                </div>
            </t>
            <t t-if="o.l10n_do_ncf_type_id">
                <div class="col-auto col-3 mw-100 mb-2">
                    <strong>Tipo:</strong>
                    <p class="m-0"><t t-esc="o.l10n_do_ncf_type_id.name"/></p>
                </div>
            </t>
            <t t-if="o.l10n_do_ncf_expiration">
                <div class="col-auto col-3 mw-100 mb-2">
                    <strong>Vence NCF:</strong>
                    <p class="m-0"><t t-esc="o.l10n_do_ncf_expiration"/></p>
                </div>
            </t>
        </xpath>

        <!-- Pie de pagina con informacion fiscal -->
        <xpath expr="//div[@id='total']" position="after">
            <t t-if="o.l10n_do_ncf_number">
                <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #dee2e6;">
                    <div style="text-align: center; margin-bottom: 10px;">
                        <strong style="font-size: 12px; color: #6c757d;">INFORMACION FISCAL</strong>
                    </div>
                    <table style="width: 100%; font-size: 11px;">
                        <tr>
                            <td style="padding: 5px;"><strong>NCF:</strong></td>
                            <td style="padding: 5px;"><t t-esc="o.l10n_do_ncf_number"/></td>
                            <td style="padding: 5px;"><strong>Tipo:</strong></td>
                            <td style="padding: 5px;"><t t-esc="o.l10n_do_ncf_type_id.name"/></td>
                        </tr>
                        <tr>
                            <td style="padding: 5px;"><strong>RNC Emisor:</strong></td>
                            <td style="padding: 5px;"><t t-esc="o.company_id.vat"/></td>
                            <td style="padding: 5px;"><strong>RNC Cliente:</strong></td>
                            <td style="padding: 5px;"><t t-esc="o.partner_id.vat"/></td>
                        </tr>
                    </table>
                </div>
            </t>
        </xpath>

    </template>

</odoo>
